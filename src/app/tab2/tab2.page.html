<ion-header [translucent]="true">
  <div *ngFor="let x of (User | async ) ">
  <ion-toolbar   class="me-1 pe-1" *ngIf="UserID==x?.userID; else guestlogin;" >
    
    <ion-title  class="ion-text-start" >Hello {{x.Name}}, </ion-title>   
    <ion-avatar slot="end"  style="height: 36px; width: 36px;"  [routerLink]="'/profile/'+ UserID" >
      <img *ngIf="x?.img; else placeholder;" src={{x.img}}  />
      <ng-template #placeholder>
       <img src="assets/images/default.png"  />
      </ng-template>
   
    </ion-avatar>  
    <ng-template #guestlogin>
      <ion-title  class="ion-text-start" >Hello Guest, </ion-title>
      <ion-avatar slot="end"  style="height: 36px; width: 36px;"  [routerLink]="'/profile/'+ UserID" >
         <img src="assets/images/default.png" />
      </ion-avatar> 
     </ng-template>
    

    <ion-progress-bar type="indeterminate" *ngIf="checking"></ion-progress-bar>

  </ion-toolbar>
</div>
</ion-header>

<ion-content [fullscreen]="true">

  
  <!-- <ion-slides pager="true" [options]="slideOpts"  >
  <ion-grid *ngFor="let x of (CAR | async ) ">
      <ion-slide *ngIf="UserID==x.userId" >
      <ion-card   class="colour" class="ps-0 pe-0" style="height: 220px!important; width: 340px!important;" [routerLink]="'/carinfo/'+ x.numPlate" >
        <ion-card-header>
          <ion-card-title >{{x.make}} {{x.model}}</ion-card-title>
        </ion-card-header>
        <ion-card-content class="ps-0 pe-0">
          <img src="assets\images\car.png" alt="..." class="w-75 d-inline-block"  >
          <ion-item lines="none">
          <ion-icon name="bluetooth-outline" color="danger" slot="end"></ion-icon>
          </ion-item>
        </ion-card-content>
      </ion-card>
    </ion-slide>

    
  </ion-grid>
</ion-slides> -->




  
  <ion-slides pager="true" [options]="slideOpts"  >
    
      <ion-slide *ngFor="let x of (Cars|async) ">
      <ion-card class="colour" class="ps-0 pe-0" style="height: 220px!important; width: 340px!important;" (click)="OpenCarInfo(x.numPlate)">
        <ion-card-header>
          <ion-card-title >{{x.make}} {{x.model}}</ion-card-title>
        </ion-card-header>
        <ion-card-content class="ps-0 pe-0">
          <img src="assets\images\car.png" alt="..." class="w-75 d-inline-block"  >
          <ion-item lines="none">
          <ion-icon name="bluetooth-outline" color="danger" slot="end"></ion-icon>
          </ion-item>
        </ion-card-content>
      </ion-card>
    </ion-slide>
 
    <ion-slide (click)="gonewCarInfo()">
      <ion-card style="height: 220px!important; width: 340px!important;">
        <ion-card-content class="d-flex flex-row justify-content-center my-5 py-5">
           <ion-icon class="mt-1 me-2"  name="add-outline" size="large"></ion-icon>  <h1  class=" pt-1 " >Add Car</h1>
        
         </ion-card-content>
      </ion-card>
 
    </ion-slide>
  </ion-slides>
    
  


 
    
  <ion-row>
    <ion-col size="12" class="ion-text-center">
      <ion-button id="open-modal" color="sky" class="p-2 m-2" *ngIf="BluetoothFlag" style="height:65px; width:150px;" (click)="Pair()">Pair Car</ion-button>
      <ion-button  color="sky" class="p-2 m-2" *ngIf="!BluetoothFlag" style="height:65px; width:150px;" (click)="diconnect()">Unpair Car</ion-button>

    </ion-col>
  </ion-row>
  <ion-list *ngIf="SupportedFlag">
    <h2 >Supported OBD-II</h2>
    <ion-item  *ngFor="let x of SupportedOBD ">
      <ion-label>{{x.Text}}</ion-label>
      <ion-label slot="end">{{x.Value}}</ion-label>
    </ion-item>
  </ion-list>
  
 
  
  <ion-modal #modal trigger="open-modal" color="sky" [initialBreakpoint]="0.4" [breakpoints]="[0, 0.4, 0.5, 0.75]">
    <ng-template>
      <ion-header [translucent]="true">
        <ion-toolbar >
          <ion-button slot="start" color="sky" (click)="modal.dismiss()">Close</ion-button>
          <ion-title class="ion-text-start">Select Device</ion-title>  
          <ion-button color="sky" slot='end' (click)="Pair()">Refresh</ion-button>
      </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-list>
          <ion-item *ngFor="let device of Devices" (click)="connect(device)">
            <ion-label >
              <h2>{{device.name || device.address}}</h2>
              <p>Paired</p>
            </ion-label>
          </ion-item>
          
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>





</ion-content>
